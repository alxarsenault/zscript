<!doctype html>
<html lang="en" data-bs-theme="auto">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Zscript">

  <title>ZScript Documentation</title>

  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">

  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/code-style.css" rel="stylesheet">
  <link href="css/doc-style.css" rel="stylesheet">
</head>

<body>
  
<!-- Top Navigation Bar -->
<nav class="navbar navbar-expand-md fixed-top zscript-navbar">
  <div class="container-fluid">
    <div class="navbar-brand site-logo">
      <span class="logo-text">ZScript<span class="text-alt">Doc</span></span>
    </div>
  </div>
</nav>
  <!-- Main Content -->
  <main class="d-flex flex-nowrap">

    <!-- Side Bar -->
<div class="zscript-sidebar flex-shrink-0 p-3">
  <a href=""
    class="d-flex align-items-center pb-3 mb-3 zscript-sidebar-item link-body-emphasis text-decoration-none border-bottom">
    <span class="fs-5 fw-semibold">Documentation</span>
  </a>

  <ul class="list-unstyled ps-0">

    <!-- Introduction -->
    <li class="mb-1">
      <button id="intro-collapse-button"
        class="btn zscript-sidebar-section-button d-inline-flex align-items-center rounded border-0 collapsed"
        data-bs-toggle="collapse" data-bs-target="#intro-collapse" aria-expanded="true">
        1. Introduction
      </button>
      <div class="collapse" id="intro-collapse">
        <ul class="zscript-sidebar-section-list list-unstyled fw-normal pb-1 small">

          <li><a id="side-menu-intro-overview" href="intro-overview.html"
              class="zscript-sidebar-item d-inline-flex"><span
                class="zscript-sidebar-num-index">1.1.&nbsp;</span><span>Overview</span></a></li>

          <li><a id="side-menu-intro-getting-started" href="intro-getting-started.html"
              class="zscript-sidebar-item d-inline-flex"><span
                class="zscript-sidebar-num-index">1.2.&nbsp;</span><span>Getting Started</span></a></li>

          <li><a id="side-menu-intro-hello-world" href="intro-hello-world.html"
              class="zscript-sidebar-item d-inline-flex"><span
                class="zscript-sidebar-num-index">1.3.&nbsp;</span><span>Hello World</span></a></li>

        </ul>
      </div>
    </li>

    <!-- Language -->
    <li class="mb-1">
      <button id="language-collapse-button"
        class="btn zscript-sidebar-section-button d-inline-flex align-items-center rounded border-0 collapsed"
        data-bs-toggle="collapse" data-bs-target="#language-collapse" aria-expanded="true">
        2. Language
      </button>
      <div class="collapse" id="language-collapse">
        <ul class="zscript-sidebar-section-list list-unstyled fw-normal pb-1 small">
          <li><a id="side-menu-language-basics" href="language-basics.html" class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.1.&nbsp;</span><span>Basics</span></a></li>

          <li><a id="side-menu-language-types" href="language-types.html" class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.2.&nbsp;</span><span>Types</span></a></li>

          <li><a id="side-menu-language-statements" href="language-statements.html" class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.3.&nbsp;</span><span>Statements</span></a></li>

          <li><a id="side-menu-language-expressions" href="language-expressions.html" class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.4.&nbsp;</span><span>Expressions</span></a></li>

          <li><a id="side-menu-language-scopes" href="language-scopes.html" class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.5.&nbsp;</span><span>Scopes</span></a></li>

          <li><a id="side-menu-language-modules" href="language-modules.html" class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.6.&nbsp;</span><span>Modules</span></a></li>

          <li><a id="side-menu-language-compile-time" href="language-compile-time.html"
              class="zscript-sidebar-item"><span
                class="zscript-sidebar-num-index">2.7.&nbsp;</span><span>Compile-Time</span></a></li>

        </ul>
      </div>
    </li>
    <li class="mb-1">
      <button class="btn zscript-sidebar-section-button d-inline-flex align-items-center rounded border-0 collapsed"
        data-bs-toggle="collapse" data-bs-target="#orders-collapse" aria-expanded="true">
        Orders
      </button>
      <div class="collapse" id="orders-collapse">
        <ul class="zscript-sidebar-section-list list-unstyled fw-normal pb-1 small">
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">New</a></li>
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">Processed</a>
          </li>
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">Shipped</a>
          </li>
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">Returned</a>
          </li>
        </ul>
      </div>
    </li>
    <li class="border-top my-3"></li>
    <li class="mb-1">
      <button class="btn zscript-sidebar-section-button d-inline-flex align-items-center rounded border-0 collapsed"
        data-bs-toggle="collapse" data-bs-target="#account-collapse" aria-expanded="true">
        Account
      </button>
      <div class="collapse" id="account-collapse">
        <ul class="zscript-sidebar-section-list list-unstyled fw-normal pb-1 small">
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">New...</a></li>
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">Profile</a>
          </li>
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">Settings</a>
          </li>
          <li><a href="#"
              class="zscript-sidebar-item link-body-emphasis d-inline-flex text-decoration-none rounded">Sign out</a>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</div>
    <div class="container">
      <div class="row">
        <div class="col content-padding"></div>
        <div id="content" class="col-8">

          <section class="zscript-top-section">
            <h2>Compile-Time Operations</h2>


            <h5>Samples</h5>
            <div class="container">
              <div class="row align-items-start">
                <div class="col">

                  <div class="card example-file-block">
                    <div class="card-header example-filepath-header">
                      file1.txt
                    </div>
                    <div class="card-body">
                      <pre class="zcompiled-code"><code class="zscript-code">John</code></pre>
                    </div>
                  </div>
                </div>
                <div class="col">

                  <div class="card example-file-block">
                    <div class="card-header example-filepath-header">
                      file2.txt
                    </div>
                    <div class="card-body">
                      <pre class="zcompiled-code"><code class="zscript-code">[1, 2, 3, "Peter"]</code></pre>
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <p></p>
            <div class="container">
              <div class="row align-items-start">
                <div class="col">

                  <div class="card example-file-block">
                    <div class="card-header example-filepath-header">
                      file3.txt
                    </div>
                    <div class="card-body">
                      <pre class="zcompiled-code"><code class="zscript-code">2 + 3</code></pre>
                    </div>
                  </div>
                </div>

                <div class="col">

                  <div class="card example-file-block">
                    <div class="card-header example-filepath-header">
                      file4.zs
                    </div>
                    <div class="card-body">
                      <pre class="zcompiled-code"><code class="zscript-code">var g = 32;</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <p></p>

            <div class="container">
              <div class="row align-items-start">

                <div class="col">

                  <div class="card example-file-block">
                    <div class="card-header example-filepath-header">
                      file5.zson
                    </div>
                    <div class="card-body">
                      <pre class="zcompiled-code"><code class="zscript-code">{
  "a": 21,
  "b": my_value
}</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <p class="p-3"></p>



            <h3>Compile-Time Expressions</h3>
            <p>Using <code>@expr</code>, you can evaluate expressions at compile time and inject their results directly
              into the code. This feature lets you perform computations, string manipulations, and other transformations
              that get “baked” into the final code.</p>
            <figure>
              <pre><code class="zscript-code">// Same as writing 'var a = 0.0;'.
var a = @expr{ return math.sin(math.pi); };

// b now contains a string with the content of "file1.txt".
// Same as writing 'var b = "John";'.
var b = @expr{ return fs.string_file("file1.txt"); };

// c now contains an array with the content of "file2.txt".
// Same as writing 'var c = [1, 2, 3, "Peter"];'.
var c = @expr{ return fs.value_file("file2.txt"); };

var d = @expr{ return fs.json_file("file5.zson", { my_value = "Bacon" }); };

print("a:", a);
print("b:", b);
print("c:", c);
print("d:", d);</code></pre>
              <figcaption class="blockquote-footer text-center"> Compile-time
                <code>@expr</code> example.
              </figcaption>
            </figure>




            <figure>
              <pre><code class="zscript-code">var a = 0.0;
var b = "John";
var c = [1, 2, 3, "Peter"];
var d = { a = 21, b = "Bacon" };</code></pre>
              <figcaption class="blockquote-footer text-center"> Compile-time
                <code>@expr</code>
                example (result).
              </figcaption>
            </figure>


            <div class="terminal " role="alert">
              <div class=fakeMenu>
                <div class="fakeButtons fakeClose"></div>
                <div class="fakeButtons fakeMinimize"></div>
                <div class="fakeButtons fakeZoom"></div>
                <div class="fakeTitle">Output</div>
              </div>
              <div class="fakeScreen">
                <pre><code class="terminal-code language-shell">a: 0.0
b: "John"
c: [1, 2, 3, "Peter"]
d: { 
  "a": 21, 
  "b": "Bacon"
}</code></pre>
              </div>
            </div>








            <p></p>


            <h3>Compile-Time Injections</h3>

            <p>
              Using <code>@inject</code> to inject raw strings.
              When you use <code>@inject</code>, the string it returns will be inserted directly into the code where it
              appears.
            </p>
            <figure>
              <pre><code class="zscript-code">// Same as writing 'var e = fs.path("/Desktop");'.
var e = @inject { return '''fs.path("/Desktop")'''; };
              
// Same as writing 'var f = 1 + 2 + 3;'.
var f = 1 + @inject { return fs.file("file3.txt").read(); };

// Same as writing 'var g = 32;'.
@inject { return fs.string_file("file4.zs"); };

// Same as writing 'var h = [1, 2, 3, "John", f];'.
@inject {
  // arr is a normal array: [1, 2, 3, "Peter"].
  var arr = fs.value_file("file2.txt");

  // arr becomes: [1, 2, 3, "John"].
  arr[3] = fs.file("file1.txt").read();

  // arr_str is a string: '[1, 2, 3, "John"]'.
  var arr_str = tostring(arr);

  // arr_str is a string: '[1, 2, 3, "John", f]'.
  arr_str = arr_str.replace("]", ", e]");

  // Output: 'var h = [1, 2, 3, "John", f];'
  return "var h = " + arr_str + ";";
};

print("e:", e);
print("f:", f);
print("g:", g);
print("h:", h);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



 
            <figure>
              <pre><code class="zscript-code">var e = fs.path("/Desktop");
var f = 1 + 2 + 3;
var g = 32;
var h = [1, 2, 3, "John", e];</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example (result)
              </figcaption>
            </figure>



            <p></p>

            <div class="terminal " role="alert">
              <div class=fakeMenu>
                <div class="fakeButtons fakeClose"></div>
                <div class="fakeButtons fakeMinimize"></div>
                <div class="fakeButtons fakeZoom"></div>
                <div class="fakeTitle">Output</div>
              </div>
              <div class="fakeScreen">
                <pre><code class="terminal-code language-shell">e: "/Desktop"
f: 6
g: 32
h: [1, 2, 3, "John", 6]</code></pre>
</div>
</div>








            <p>The content of a file can be included inplace (like in C++) with the <code>@inject</code> command or by
              using <code>#include</code>.</p>
            <figure>
              <pre><code class="zscript-code">#include "file4.zs"
@inject { return fs.file("file4.zs").read(); };</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>




            <p></p>


            <h3>Scopes</h3>

            <p></p>
            <figure>
              <pre><code class="zscript-code">var t = get_unknown_table();

var val;
if(check_some_stuff(t)) {
  val = get_some_stuff(t);
}

print(val);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <figure>
              <pre><code class="zscript-code">var t = get_unknown_table();

if(check_some_stuff(t)) {
  var v1 = get_some_stuff(t);
  outer var v2 = get_some_stuff(t);

  // All good.
  print(v1, v2);
}

// Error: v1 is out of scope, only v2 is accessible.
print(v1, v2);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>


            <figure>
              <pre><code class="zscript-code">var t = get_unknown_table();

{
  {
    if(check_some_stuff(t)) {
      outer var v1 = get_some_stuff(t);
      outer&lt;2&gt; var v2 = get_some_stuff(t);
    }

    // All good.
    print(v1, v2);
  }

  // Error: v1 is out of scope, only v2 is accessible.
  print(v1, v2);
}

// Error: v1 and v2 are out of scope.
print(v1, v2);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>





            <figure>
              <pre><code class="zscript-code">@scope my_scope;

var t = get_unknown_table();

{
  {
    if(check_some_stuff(t)) {
      outer&lt;my_scope&gt; var val = get_some_stuff(t);
    }
  }
}

// All good.
print(val);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>




            <!--  -->



            <figure>
              <pre><code class="zscript-code">@scope my_scope {
  function init() { print("Init"); }
  function first_enter() { print("First Enter"); }
  function enter(int count) { print("Enter"); }
  function first_exit() { print("First Exit"); }
  function exit(int count) { print("Exit"); }
};

print("A");
@my_scope {
  print("B");
}
print("C");
@my_scope {
  print("D");
}
print("E");</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>




            <p></p>
            <div class="terminal " role="alert">
              <div class=fakeMenu>
                <div class="fakeButtons fakeClose"></div>
                <div class="fakeButtons fakeMinimize"></div>
                <div class="fakeButtons fakeZoom"></div>
                <div class="fakeTitle">Output</div>
              </div>
              <div class="fakeScreen">
                <pre><code class="terminal-code language-shell">A
Init
First Enter
B
First Exit
C
Enter
D
Exit
E</code></pre>
              </div>
            </div>




            <!--  -->



            <figure>
              <pre><code class="zscript-code">@scope my_scope {
  init = $() { print("Init"); }
  can_enter = $(int count) { return count == 1; }
  enter = $(int count) { print("Enter"); }
  exit = $(int count) { print("Exit"); }
};

print("A");
@my_scope {
  print("B");
}
print("C");
@my_scope {
  print("D");
}
print("E");</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <p></p>
            <div class="alert alert-secondary d-flex" role="alert">
              <div>Output:
                <code></br>A</br>Init</br>Enter</br>B</br>Exit</br>C</br>E</code>
              </div>
            </div>

            <!--  -->



            <figure>
              <pre><code class="zscript-code">@scope my_scope;

const arr = [10, 11, 12, 13, 14];
for(int i = 0; i &lt; arr.size(); i++) @my_scope {
  @my_scope::first_enter {
    outer&lt;my_scope&gt; var sum = arr[0], min = arr[0], max = arr[0];
  }

  @my_scope::enter {
    sum += arr[i];
    min = math.min(arr[i], min);
    max = math.max(arr[i], max);
  }
}

print(sum, min, max);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <p></p>
            <div class="alert alert-secondary d-flex" role="alert">
              <div>Output:
                <code></br>60 10 14</code>
              </div>
            </div>



            <figure>
              <pre><code class="zscript-code">var arr = [1, 2, 3];
loop().init($(ctx){
  print("init");
  ctx.i = 0;
  ctx.sz = arr.size();
}).can_enter($(ctx) {
  print("can_enter", ctx.count);
  return ctx.i &lt; ctx.sz;
}).first($(ctx) {
  print("first", ctx.count);
}).enter($(ctx) {
  print("enter", ctx.count);
}).process($(ctx) {
  print("process", ctx.count);
}).first_leave($(ctx) {
  print("first_leave", ctx.count);
}).leave($(ctx) {
  print("leave", ctx.count);
}).next($(ctx) {
  print("next", ctx.count);
  ctx.i++;
}).exit($(ctx) {
  print("exit", ctx.count);
});
              </code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <p></p>
            <div class="alert alert-secondary d-flex" role="alert">
              <div>Output:
                <code></br>init
                </br>can_enter 0
              </br>first 0
           </br>process 0
        </br>first_leave 0
     </br>next 0
  
    </br>can_enter 1
  </br>enter 1
  </br>process 1
  </br>leave 1
  </br>next 1

</br>can_enter 2
</br>enter 2
</br>process 2
</br>leave 2
</br>next 2
  
</br>can_enter 3
</br>exit 3
  
  </code>
              </div>
            </div>
          </section>
        </div>

        <div class="col content-padding"></div>
      </div>
    </div>


  </main>

  <script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
  crossorigin="anonymous"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/highlight.min.js"></script>
<script src="js/zscript-highlight.js"></script>
<script src="js/highlightjs-line-numbers.min.js"></script>
<script async defer src="js/app.js"></script>

  <script>

    // $(document).ready(function () {

    //   // var pageName = window.location.pathname.split('\\').pop().split('/').pop().replace(/\.[^/.]+$/, "");
    //   // hljs.highlightAll();
    //   // loadSections(pageName);
    //   // document.addEventListener('DOMContentLoaded', (event) => {
    //   // document.querySelectorAll('.zcompiled-code .zscript').forEach((el) => {
    //   //   hljs.highlightElement(el);
    //   // });


    //   // hljs.highlightAll();
    //   $(".zscript-code").each(function () { hljs.highlightElement($(this)[0]); });

    //   $(".terminal-code").each(function () {
    //     hljs.highlightElement($(this)[0]);
    //     // 
    //     // console.log($(this).text())


    //     //   let fff =hljs.highlight($(this).text(), {language:"shell"});
    //     //   console.log(fff)
    //     // $(this).html(fff.value);

    //   });


    //   console.log(hljs.listLanguages());
    //   $(".blockquote-footer").each(function (idx) {
    //     $(this).prepend($("<strong></strong>").html("Figure " + (idx + 1) + " &nbsp;"));
    //   });
    //   // $('.card example-file-block').addClass('card');

    //   // document.querySelectorAll('.zscript-code').forEach((el) => {
    //   // hljs.highlightElement(el);
    //   // });
    // });

  </script>
</body>

</html>