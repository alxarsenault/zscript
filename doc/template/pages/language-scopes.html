<!doctype html>
<html lang="en" data-bs-theme="auto">

%head

<body>
  %nav

  <!-- Main Content -->
  <main class="d-flex flex-nowrap">

    %sidebar

    <div class="container">
      <div class="row">
        <div class="col content-padding"></div>
        <div id="content" class="col-8">

          <section class="zscript-top-section">
            <h2>2.5. Scopes</h2>

            <p></p>
            <figure>
              <pre><code class="zscript-code">var t = get_unknown_table();

var val;
if(check_some_stuff(t)) {
  val = get_some_stuff(t);
}

print(val);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <figure>
              <pre><code class="zscript-code">var t = get_unknown_table();

if(check_some_stuff(t)) {
  var v1 = get_some_stuff(t);
  outer var v2 = get_some_stuff(t);

  // All good.
  print(v1, v2);
}

// Error: v1 is out of scope, only v2 is accessible.
print(v1, v2);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>


            <figure>
              <pre><code class="zscript-code">var t = get_unknown_table();

{
  {
    if(check_some_stuff(t)) {
      outer var v1 = get_some_stuff(t);
      outer&lt;2&gt; var v2 = get_some_stuff(t);
    }

    // All good.
    print(v1, v2);
  }

  // Error: v1 is out of scope, only v2 is accessible.
  print(v1, v2);
}

// Error: v1 and v2 are out of scope.
print(v1, v2);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>





            <figure>
              <pre><code class="zscript-code">@scope my_scope;

var t = get_unknown_table();

{
  {
    if(check_some_stuff(t)) {
      outer&lt;my_scope&gt; var val = get_some_stuff(t);
    }
  }
}

// All good.
print(val);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>




            <!--  -->



            <figure>
              <pre><code class="zscript-code">@scope my_scope {
  function init() { print("Init"); }
  function enter(int count) { print("Enter"); }
  function exit(int count) { print("Exit"); }
};

print("A");
@my_scope {
  print("B");
}
print("C");
@my_scope {
  print("D");
}
print("E");</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>




            <p></p>
            <div class="terminal " role="alert">
              <div class=fakeMenu>
                <div class="fakeButtons fakeClose"></div>
                <div class="fakeButtons fakeMinimize"></div>
                <div class="fakeButtons fakeZoom"></div>
                <div class="fakeTitle">Output</div>
              </div>
              <div class="fakeScreen">
                <pre><code class="terminal-code language-shell">A
Init
First Enter
B
First Exit
C
Enter
D
Exit
E</code></pre>
              </div>
            </div>




            <!--  -->



            <figure>
              <pre><code class="zscript-code">@scope my_scope {
  init = $() { print("Init"); }
  can_enter = $(int count) { return count == 1; }
  enter = $(int count) { print("Enter"); }
  exit = $(int count) { print("Exit"); }
};

print("A");
@my_scope {
  print("B");
}
print("C");
@my_scope {
  print("D");
}
print("E");</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <p></p>
            <div class="alert alert-secondary d-flex" role="alert">
              <div>Output:
                <code></br>A</br>Init</br>Enter</br>B</br>Exit</br>C</br>E</code>
              </div>
            </div>

            <!--  -->



            <figure>
              <pre><code class="zscript-code">@scope my_scope;

const arr = [10, 11, 12, 13, 14];
for(int i = 0; i &lt; arr.size(); i++) @my_scope {
  @my_scope::first_enter {
    outer&lt;my_scope&gt; var sum = arr[0], min = arr[0], max = arr[0];
  }

  @my_scope::enter {
    sum += arr[i];
    min = math.min(arr[i], min);
    max = math.max(arr[i], max);
  }
}

print(sum, min, max);</code></pre>

              <figcaption class="blockquote-footer text-center">Compile-time
                <code>@inject</code> example
              </figcaption>
            </figure>



            <p></p>
            <div class="alert alert-secondary d-flex" role="alert">
              <div>Output:
                <code></br>60 10 14</code>
              </div>
            </div>


 
          </section>
        </div>

        <div class="col content-padding"></div>
      </div>
    </div>


  </main>

  %load-scripts

  <script>

    // $(document).ready(function () {
    //   var pageName = window.location.pathname.split('\\').pop().split('/').pop().replace(/\.[^/.]+$/, "");
    //   // pageName = pageName[0].toUpperCase() + pageName.slice(1);

    //   $("#side-menu-language-" + pageName).addClass("zscript-sidebar-selected-item");
       
    //   $(".zscript-code").each(function () { hljs.highlightElement($(this)[0]); });

    //   $(".terminal-code").each(function () {
    //     hljs.highlightElement($(this)[0]);
    //   });


    //   console.log(hljs.listLanguages());
    //   $(".blockquote-footer").each(function (idx) {
    //     $(this).prepend($("<strong></strong>").html("Figure " + (idx + 1) + " &nbsp;"));
    //   });
    // });

  </script>
</body>

</html>